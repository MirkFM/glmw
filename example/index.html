<link href="//fonts.googleapis.com/css?family=Open+Sans:300italic,600italic,300,600&subset=latin-ext,latin" rel="stylesheet" type="text/css">

<script src="gl-matrix.min.js"></script>
<script src="//cdn.rawgit.com/maierfelix/glmw/master/dist/glmw-browser.js"></script>

<script>
  glmw.init().then(instance => {
    // => glmw.mat4.create()
    Object.assign(window.glmw = {}, instance);
    // => mat4.create()
    // Object.assign(window, instance);
    init();
  });

  function init() {
    // glmw
    {
      let ns = glmw.mat4;
      let a = ns.create();
      let b = ns.create();
      let now = performance.now();
      for (let ii = 0; ii < 1000; ++ii) {
        ns.multiply(a, a, b);
      };
      let then = performance.now();
      console.log("WebAssembly:", then - now, "ms", ns.view(a));
    }
    // gl-matrix
    {
      let ns = mat4;
      let a = ns.create();
      let b = ns.create();
      let now = performance.now();
      for (let ii = 0; ii < 1000; ++ii) {
        ns.mul(a, a, b);
      };
      let then = performance.now();
      console.log("JavaScript:", then - now, "ms", a);
    }
  };
</script>
